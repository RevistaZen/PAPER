<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RevistaZen - DOI Gratuito para Artigos Cient√≠ficos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }
        
        .logo-icon {
            font-size: 2rem;
        }
        
        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .tagline {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            align-items: center;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }
        
        nav a:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .nav-cta {
            background: white;
            color: #667eea;
            padding: 0.7rem 1.5rem !important;
            border-radius: 25px;
            font-weight: 700;
        }
        
        .nav-cta:hover {
            background: #f7fafc;
            transform: scale(1.05);
        }
        
        /* Page Sections */
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
        }
        
        /* Hero Section */
        .hero {
            padding: 5rem 0;
            text-align: center;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .hero h1 {
            font-size: 3.2rem;
            margin-bottom: 1.5rem;
            color: #2d3748;
            line-height: 1.2;
        }
        
        .hero p {
            font-size: 1.3rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: #4a5568;
        }
        
        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s;
            margin-top: 1rem;
            border: none;
            cursor: pointer;
        }
        
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.5);
        }
        
        /* Features */
        .features {
            padding: 5rem 0;
            background: #f8fafc;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-title h2 {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 1rem;
        }
        
        .section-title p {
            font-size: 1.2rem;
            color: #718096;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .feature-card {
            background: white;
            border-radius: 12px;
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }
        
        /* Steps */
        .steps-section {
            padding: 5rem 0;
            background: white;
        }
        
        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }
        
        .step {
            text-align: center;
        }
        
        .step-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 1.5rem;
        }
        
        .step h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }
        
        /* Upload Tool Section */
        .upload-tool {
            padding: 3rem 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            min-height: 100vh;
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .tool-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .icon-box {
            background: #667eea;
            padding: 16px;
            border-radius: 12px;
        }
        
        .icon-box i {
            font-size: 2.5rem;
            color: white;
        }
        
        .tool-header h2 {
            font-size: 28px;
            color: #1a202c;
        }
        
        .info-box {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .info-box h3 {
            color: #1e40af;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .info-box ol {
            color: #1e40af;
            margin-left: 20px;
            line-height: 1.8;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            font-size: 14px;
        }
        
        input[type="text"],
        input[type="password"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            resize: vertical;
            font-family: inherit;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin-bottom: 12px;
        }
        
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .drop-zone {
            border: 3px dashed #cbd5e0;
            border-radius: 12px;
            padding: 60px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
        }
        
        .drop-zone:hover {
            border-color: #667eea;
            background: linear-gradient(135deg, #e0f2fe 0%, #ddd6fe 100%);
        }
        
        .drop-zone.dragover {
            border-color: #667eea;
            background: #dbeafe;
        }
        
        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: #667eea;
        }
        
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .author-item {
            background: #f9fafb;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            border: 2px solid #e5e7eb;
        }
        
        .author-inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .author-row {
            display: flex;
            gap: 10px;
        }
        
        .btn-small {
            padding: 8px 16px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
        }
        
        .btn-add {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
            background: none;
            border: none;
            padding: 8px 0;
            font-size: 14px;
        }
        
        .btn-test {
            padding: 10px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            margin-top: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .btn-test:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }
        
        .btn-test:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        
        .api-status {
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            font-weight: 600;
            text-align: center;
        }
        
        .api-status.success {
            background: #dcfce7;
            color: #166534;
            border: 2px solid #bbf7d0;
        }
        
        .api-status.error {
            background: #fef2f2;
            color: #991b1b;
            border: 2px solid #fecaca;
        }
        
        .api-status.testing {
            background: #fef3c7;
            color: #92400e;
            border: 2px solid #fde68a;
        }
        
        .status {
            padding: 16px;
            border-radius: 12px;
            border: 2px solid;
            margin-top: 20px;
        }
        
        .status-success {
            background: #f0fdf4;
            border-color: #86efac;
            color: #166534;
        }
        
        .status-error {
            background: #fef2f2;
            border-color: #fca5a5;
            color: #991b1b;
        }
        
        .status-info {
            background: #eff6ff;
            border-color: #93c5fd;
            color: #1e40af;
        }
        
        .status-warning {
            background: #fffbeb;
            border-color: #fcd34d;
            color: #92400e;
        }
        
        .spinner {
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none !important;
        }
        
        .help-text {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }
        
        .link {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }
        
        .zenodo-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #10b981;
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        /* Footer */
        footer {
            background: #2d3748;
            color: white;
            padding: 3rem 0 1.5rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.5rem;
        }
        
        .footer-links a {
            color: #cbd5e0;
            text-decoration: none;
        }
        
        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid #4a5568;
            color: #a0aec0;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .author-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo" onclick="showPage('home')">
                    <div class="logo-icon">
                        <i class="fas fa-scroll"></i>
                    </div>
                    <div>
                        <div class="logo-text">RevistaZen</div>
                        <div class="tagline">DOI gratuito para artigos</div>
                    </div>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" onclick="showPage('home')">In√≠cio</a></li>
                        <li><a href="#" onclick="showPage('features')">Recursos</a></li>
                        <li><a href="#" onclick="showPage('steps')">Como Funciona</a></li>
                        <li><a href="#" onclick="showPage('upload')" class="nav-cta">
                            <i class="fas fa-rocket"></i> Come√ßar Agora
                        </a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div id="homePage" class="page-section active">
        <section class="hero">
            <div class="container">
                <h1>üéì Publica√ß√£o Cient√≠fica com DOI Gratuito</h1>
                <p>Obtenha um identificador DOI permanente para seu artigo cient√≠fico de forma r√°pida, gratuita e sem complica√ß√µes atrav√©s da integra√ß√£o com o Zenodo.</p>
                <button class="cta-button" onclick="showPage('upload')">
                    <i class="fas fa-rocket"></i> Obter DOI Agora
                </button>
            </div>
        </section>

        <section class="features" id="features">
            <div class="container">
                <div class="section-title">
                    <h2>üìö Por Que Usar a RevistaZen?</h2>
                    <p>Uma solu√ß√£o completa para publica√ß√£o e dissemina√ß√£o de pesquisa cient√≠fica</p>
                </div>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3>Processamento R√°pido</h3>
                        <p>Upload e processamento autom√°tico de PDFs com extra√ß√£o inteligente de metadados otimizada para artigos LaTeX.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-fingerprint"></i>
                        </div>
                        <h3>DOI √önico e Permanente</h3>
                        <p>Cada artigo recebe um Digital Object Identifier (DOI) √∫nico e permanente que garante identifica√ß√£o e cita√ß√£o precisas.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h3>Integra√ß√£o Zenodo</h3>
                        <p>Publica√ß√£o direta no Zenodo - reposit√≥rio confi√°vel apoiado pelo CERN e pela Comiss√£o Europeia.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-lock-open"></i>
                        </div>
                        <h3>100% Gratuito</h3>
                        <p>Sem taxas de publica√ß√£o, sem custos ocultos. Contribua para o movimento de ci√™ncia aberta.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>M√©tricas de Impacto</h3>
                        <p>Acompanhe o impacto da sua pesquisa atrav√©s de estat√≠sticas de acesso e cita√ß√µes.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Reconhecimento Acad√™mico</h3>
                        <p>Fortale√ßa seu curr√≠culo e perfil de pesquisador com publica√ß√µes indexadas.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="steps-section">
            <div class="container">
                <div class="section-title">
                    <h2>üöÄ Como Funciona</h2>
                    <p>Em apenas 3 passos simples, seu artigo estar√° publicado com DOI √∫nico</p>
                </div>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>üìÑ Upload do Artigo</h3>
                        <p>Fa√ßa upload do PDF do seu artigo - arraste e solte ou selecione o arquivo.</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>‚úèÔ∏è Revis√£o de Metadados</h3>
                        <p>Revise e ajuste os metadados extra√≠dos automaticamente (t√≠tulo, autores, resumo).</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>üéØ Publica√ß√£o</h3>
                        <p>Clique em publicar e receba instantaneamente o DOI √∫nico e permanente do seu artigo.</p>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 3rem;">
                    <button class="cta-button" onclick="showPage('upload')">
                        <i class="fas fa-paper-plane"></i> Come√ßar Minha Publica√ß√£o
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Upload Tool Page -->
    <div id="uploadPage" class="page-section">
        <section class="upload-tool">
            <div class="container">
                <!-- Tool Header -->
                <div class="card">
                    <div class="tool-header">
                        <div class="icon-box">
                            <i class="fas fa-file-upload"></i>
                        </div>
                        <div>
                            <h2>Zenodo Article Uploader <span class="zenodo-badge">LaTeX Ready</span></h2>
                            <p style="color: #718096;">üì§ Submeta seus artigos cient√≠ficos ao Zenodo automaticamente</p>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <h3>üìñ Instru√ß√µes de Uso:</h3>
                        <ol>
                            <li><strong>Fa√ßa upload</strong> do PDF do seu artigo LaTeX</li>
                            <li><strong>Revise os metadados</strong> extra√≠dos automaticamente</li>
                            <li><strong>Clique em "Submeter"</strong> para obter seu DOI √∫nico e permanente!</li>
                        </ol>
                    </div>
                </div>

                <!-- Token Configuration -->
                <div class="card">
                    <h2 style="margin-bottom: 16px; font-size: 20px;">üîê Configura√ß√£o da API RevistaZen</h2>
                    
                    <div class="form-group">
                        <label for="zenodoToken">API Token do Zenodo</label>
                        <input type="password" id="zenodoToken" value="qv8u7BTnv1ZpVdKuILN9zFPDJqbuwbqd02Bfs3aR93OPq080u497D5npfPqa" placeholder="Cole sua API Token aqui">
                        <p class="help-text">Token de acesso para a API do Zenodo. Mantenha isso seguro!</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="useSandbox">Usar Sandbox (Ambiente de Teste)</label>
                        <div class="checkbox-label">
                            <input type="checkbox" id="useSandbox">
                            <span>Sim, usar ambiente de teste (recomendado para testes)</span>
                        </div>
                        <p class="help-text">No sandbox, os DOIs s√£o para teste e n√£o s√£o permanentes</p>
                    </div>
                    
                    <button id="testApiBtn" class="btn-test" onclick="testZenodoAPI()">
                        <i class="fas fa-plug"></i> Testar Conex√£o com API
                    </button>
                    
                    <div id="apiStatus" class="api-status hidden"></div>
                </div>

                <!-- File Upload -->
                <div class="card">
                    <h2 style="margin-bottom: 16px; font-size: 20px;">üìÑ Upload do Artigo</h2>
                    
                    <div id="dropZone" class="drop-zone">
                        <input type="file" id="pdfFile" accept=".pdf" class="hidden">
                        <div id="uploadPrompt">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <p style="font-size: 18px; font-weight: 600; color: #374151; margin-bottom: 8px;">
                                Clique ou arraste seu PDF aqui
                            </p>
                            <p style="font-size: 14px; color: #6b7280;">
                                Extra√ß√£o autom√°tica otimizada para PDFs LaTeX
                            </p>
                        </div>
                        <div id="loadingPrompt" class="hidden">
                            <div class="spinner" style="width: 60px; height: 60px; border-width: 4px; margin: 0 auto 16px; border-color: #667eea; border-top-color: transparent;"></div>
                            <p style="font-size: 18px; font-weight: 600; color: #667eea;">
                                Processando PDF...
                            </p>
                        </div>
                        <div id="successPrompt" class="hidden">
                            <i class="fas fa-check-circle" style="font-size: 60px; margin-bottom: 16px; color: #10b981;"></i>
                            <p id="fileName" style="font-size: 18px; font-weight: 600; color: #10b981;"></p>
                            <p style="font-size: 14px; color: #6b7280; margin-top: 8px;">
                                Clique para trocar o arquivo
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Metadata Form -->
                <div id="metadataForm" class="card hidden">
                    <h2 style="margin-bottom: 16px; font-size: 20px;">üìù Metadados do Artigo</h2>
                    
                    <div class="form-group">
                        <label for="title">üìå T√≠tulo *</label>
                        <input type="text" id="title" placeholder="T√≠tulo completo do artigo">
                    </div>

                    <div class="form-group">
                        <label for="description">üìÑ Resumo/Abstract *</label>
                        <textarea id="description" rows="6" placeholder="Resumo ou abstract do artigo"></textarea>
                    </div>

                    <div class="form-group">
                        <label>üë• Autores</label>
                        <div id="authorsList"></div>
                        <button class="btn-add" onclick="addAuthor()">
                            <span style="font-size: 20px;">+</span> Adicionar autor
                        </button>
                    </div>

                    <div class="form-group">
                        <label for="keywords">üè∑Ô∏è Palavras-chave</label>
                        <input type="text" id="keywords" placeholder="palavra1, palavra2, palavra3">
                        <p class="help-text">Separe as palavras-chave por v√≠rgula</p>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="card">
                    <button id="submitBtn" class="btn btn-primary" onclick="submitToZenodo()" disabled>
                        <span id="submitBtnText">üöÄ Submeter ao Zenodo</span>
                    </button>
                </div>

                <!-- Status Area -->
                <div id="statusArea"></div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>RevistaZen</h3>
                    <p>Plataforma de publica√ß√£o cient√≠fica com DOI gratuito atrav√©s da integra√ß√£o com o Zenodo. Cada artigo recebe um DOI √∫nico e permanente.</p>
                </div>
                <div class="footer-column">
                    <h3>Links R√°pidos</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showPage('home')">In√≠cio</a></li>
                        <li><a href="#" onclick="showPage('features')">Recursos</a></li>
                        <li><a href="#" onclick="showPage('steps')">Como Funciona</a></li>
                        <li><a href="#" onclick="showPage('upload')">Come√ßar Agora</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Recursos</h3>
                    <ul class="footer-links">
                        <li><a href="https://zenodo.org" target="_blank">Zenodo</a></li>
                        <li><a href="https://sandbox.zenodo.org" target="_blank">Zenodo Sandbox</a></li>
                        <li><a href="https://help.zenodo.org" target="_blank">Ajuda Zenodo</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Sobre DOI</h3>
                    <ul class="footer-links">
                        <li><a href="https://www.doi.org" target="_blank">O que √© DOI?</a></li>
                        <li><a href="#">Por que usar DOI?</a></li>
                        <li><a href="#">Ci√™ncia Aberta</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 RevistaZen. Todos os direitos reservados. | Powered by Zenodo & CERN</p>
            </div>
        </div>
    </footer>

    <script>
        // PDF.js setup
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        // Global variables
        let selectedFile = null;
        let extractedFullText = '';
        let authors = [{
            name: '',
            affiliation: '',
            orcid: ''
        }];

        // Page Navigation
        function showPage(pageName) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            if (pageName === 'home' || pageName === 'features' || pageName === 'steps') {
                document.getElementById('homePage').classList.add('active');
                if (pageName === 'features') {
                    setTimeout(() => {
                        document.querySelector('.features').scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                } else if (pageName === 'steps') {
                    setTimeout(() => {
                        document.querySelector('.steps-section').scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                }
            } else if (pageName === 'upload') {
                document.getElementById('uploadPage').classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Test Zenodo API connection
        async function testZenodoAPI() {
            const token = document.getElementById('zenodoToken').value;
            const useSandbox = document.getElementById('useSandbox').checked;
            const testBtn = document.getElementById('testApiBtn');
            const statusDiv = document.getElementById('apiStatus');
            
            if (!token) {
                statusDiv.innerHTML = '‚ùå Por favor, insira um token da API';
                statusDiv.className = 'api-status error';
                statusDiv.classList.remove('hidden');
                return;
            }
            
            testBtn.disabled = true;
            testBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testando...';
            statusDiv.innerHTML = 'üîç Conectando com o Zenodo...';
            statusDiv.className = 'api-status testing';
            statusDiv.classList.remove('hidden');
            
            const baseUrl = useSandbox ? 'https://sandbox.zenodo.org/api' : 'https://zenodo.org/api';
            
            try {
                const response = await fetch(`${baseUrl}/deposit/depositions`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    statusDiv.innerHTML = `‚úÖ Conex√£o bem-sucedida! API do ${useSandbox ? 'Zenodo Sandbox' : 'Zenodo'} est√° funcionando perfeitamente.`;
                    statusDiv.className = 'api-status success';
                } else if (response.status === 401) {
                    statusDiv.innerHTML = '‚ùå Token inv√°lido ou sem permiss√µes. Verifique seu token da API.';
                    statusDiv.className = 'api-status error';
                } else {
                    statusDiv.innerHTML = `‚ö†Ô∏è Resposta inesperada: ${response.status}. Verifique sua conex√£o.`;
                    statusDiv.className = 'api-status error';
                }
            } catch (error) {
                console.error('API Test Error:', error);
                statusDiv.innerHTML = `‚ùå Erro de conex√£o: ${error.message}. Verifique sua internet.`;
                statusDiv.className = 'api-status error';
            } finally {
                testBtn.disabled = false;
                testBtn.innerHTML = '<i class="fas fa-plug"></i> Testar Conex√£o com API';
            }
        }

        // Setup drag and drop
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('pdfFile');

        dropZone.addEventListener('click', () => fileInput.click());
        
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        // Handle file selection
        async function handleFile(file) {
            if (file.type !== 'application/pdf') {
                showStatus('‚ùå Por favor, selecione um arquivo PDF v√°lido.', 'error');
                return;
            }

            selectedFile = file;
            
            // Update UI
            document.getElementById('uploadPrompt').classList.add('hidden');
            document.getElementById('successPrompt').classList.add('hidden');
            document.getElementById('loadingPrompt').classList.remove('hidden');

            // Extract text from PDF
            await extractPDFText(file);
        }

        // Extract text from PDF using PDF.js
        async function extractPDFText(file) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({data: arrayBuffer}).promise;
                
                // Try to get metadata from PDF properties
                const metadata = await pdf.getMetadata();
                let hasMetadata = false;
                
                if (metadata && metadata.info) {
                    const info = metadata.info;
                    
                    if (info.Title && info.Title.trim().length > 0) {
                        document.getElementById('title').value = info.Title.trim();
                        hasMetadata = true;
                    }
                    
                    if (info.Subject && info.Subject.trim().length > 0) {
                        document.getElementById('description').value = info.Subject.trim();
                        hasMetadata = true;
                    }
                    
                    if (info.Keywords && info.Keywords.trim().length > 0) {
                        document.getElementById('keywords').value = info.Keywords.trim();
                        hasMetadata = true;
                    }
                    
                    if (info.Author && info.Author.trim().length > 0) {
                        const pdfAuthor = info.Author.trim();
                        authors[0].name = pdfAuthor;
                        hasMetadata = true;
                    }
                }
                
                // Extract full text
                let fullText = '';
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    fullText += pageText + '\n';
                }
                
                extractedFullText = fullText;
                
                if (!hasMetadata) {
                    autoFillMetadata(fullText, file.name);
                }
                
                renderAuthors();
                
                // Show form and enable submit
                document.getElementById('metadataForm').classList.remove('hidden');
                document.getElementById('submitBtn').disabled = false;

                // Update UI
                document.getElementById('loadingPrompt').classList.add('hidden');
                document.getElementById('successPrompt').classList.remove('hidden');
                document.getElementById('fileName').textContent = `‚úÖ ${file.name}`;

                showStatus('‚úÖ PDF processado! Verifique os metadados abaixo e ajuste se necess√°rio.', 'success');

            } catch (error) {
                console.error('Error extracting PDF:', error);
                
                document.getElementById('metadataForm').classList.remove('hidden');
                document.getElementById('submitBtn').disabled = false;
                renderAuthors();
                
                document.getElementById('loadingPrompt').classList.add('hidden');
                document.getElementById('successPrompt').classList.remove('hidden');
                document.getElementById('fileName').textContent = `‚úÖ ${file.name}`;

                showStatus('‚ö†Ô∏è PDF carregado. Por favor, preencha os metadados manualmente.', 'warning');
            }
        }

        // Auto-fill metadata from text
        function autoFillMetadata(text, filename) {
            text = text.replace(/^[\s\S]*?(springer|nature|latex|template)[\s\S]*?\n/im, '');
            
            const lines = text.split('\n').map(l => l.trim()).filter(l => l.length > 0);
            
            // TITLE EXTRACTION
            let potentialTitle = '';
            
            for (let i = 0; i < Math.min(lines.length, 20); i++) {
                const line = lines[i];
                
                if (line.match(/springer|nature|latex|template|preprint|draft/i)) continue;
                if (line.match(/[@]/i)) continue;
                if (line.match(/orcid|lattes|id:/i)) continue;
                if (line.match(/^graduate|^faculdade|^university/i)) continue;
                if (line.length < 30) continue;
                if (line.length > 200) continue;
                if (line.match(/^\d+\s/)) continue;
                if (line.split(/\s+/).length < 5) continue;
                if (line.match(/^[A-Z√Ä-√ö\s]+$/) && line.split(/\s+/).length <= 6) continue;
                
                potentialTitle = line;
                break;
            }
            
            if (!potentialTitle) {
                for (let i = 0; i < Math.min(lines.length, 30); i++) {
                    const line = lines[i];
                    if (line.length >= 40 && line.length <= 200) {
                        const capitals = (line.match(/[A-Z]/g) || []).length;
                        if (capitals >= 4) {
                            potentialTitle = line;
                            break;
                        }
                    }
                }
            }
            
            if (!potentialTitle) {
                potentialTitle = filename.replace('.pdf', '').replace(/_/g, ' ');
            }
            
            document.getElementById('title').value = potentialTitle.trim();

            // ABSTRACT EXTRACTION
            let abstract = '';
            const abstractIndex = text.search(/\babstract\b/i);
            if (abstractIndex !== -1) {
                const afterAbstract = text.substring(abstractIndex + 8);
                const endMatch = afterAbstract.search(/\b(keywords?|palavras-chave|introduction|introdu√ß√£o|1\s+introduction)\b/i);
                
                if (endMatch !== -1) {
                    abstract = afterAbstract.substring(0, endMatch);
                } else {
                    abstract = afterAbstract.substring(0, 2000);
                }
                
                abstract = abstract.replace(/\s+/g, ' ').replace(/\n/g, ' ').trim();
                document.getElementById('description').value = abstract;
            }

            // KEYWORDS EXTRACTION
            const keywordsMatch = text.match(/keywords?[:\s]+(.+?)(?:\n\n|introduction|1\s+introduction|\d+\s+\w+)/is);
            if (keywordsMatch) {
                let keywords = keywordsMatch[1]
                    .replace(/\n/g, ' ')
                    .replace(/\s+/g, ' ')
                    .replace(/[;.]/g, ',')
                    .trim();
                
                keywords = keywords.replace(/,+/g, ',').replace(/,\s*$/, '');
                document.getElementById('keywords').value = keywords;
            }

            // AUTHOR EXTRACTION
            const titleIndex = text.indexOf(potentialTitle);
            const abstractStartIndex = text.search(/\babstract\b/i);
            
            if (titleIndex !== -1 && abstractStartIndex !== -1) {
                const betweenTitleAndAbstract = text.substring(titleIndex + potentialTitle.length, abstractStartIndex);
                const betweenLines = betweenTitleAndAbstract.split('\n').map(l => l.trim()).filter(l => l.length > 0);
                
                let authorName = '';
                let affiliation = '';
                let orcid = '';
                
                for (let i = 0; i < betweenLines.length; i++) {
                    const line = betweenLines[i];
                    
                    if (!authorName && line.match(/^[A-Z√Ä-√ö][A-Z√Ä-√öa-z√†-√∫\s]+$/) && line.split(/\s+/).length >= 2 && line.split(/\s+/).length <= 6) {
                        authorName = line;
                        continue;
                    }
                    
                    if (authorName && !affiliation && line.match(/graduate|faculdade|university|instituto|college/i)) {
                        affiliation = line.replace(/@.*$/, '').replace(/lattes.*$/i, '').replace(/orcid.*$/i, '').trim();
                        continue;
                    }
                    
                    const orcidMatch = line.match(/orcid[:\s]+([0-9-]+)/i);
                    if (orcidMatch) {
                        orcid = orcidMatch[1];
                    }
                }
                
                if (authorName) {
                    authors = [{
                        name: authorName,
                        affiliation: affiliation || '',
                        orcid: orcid || ''
                    }];
                }
            }

            renderAuthors();
        }

        // Render authors list
        function renderAuthors() {
            const container = document.getElementById('authorsList');
            container.innerHTML = '';
            
            authors.forEach((author, index) => {
                const authorDiv = document.createElement('div');
                authorDiv.className = 'author-item';
                authorDiv.innerHTML = `
                    <div class="author-inputs">
                        <input type="text" value="${author.name}" onchange="updateAuthor(${index}, 'name', this.value)" placeholder="Nome completo" style="width: 100%; padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px;">
                        <input type="text" value="${author.affiliation}" onchange="updateAuthor(${index}, 'affiliation', this.value)" placeholder="Institui√ß√£o/Afilia√ß√£o" style="width: 100%; padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px;">
                        <div class="author-row">
                            <input type="text" value="${author.orcid}" onchange="updateAuthor(${index}, 'orcid', this.value)" placeholder="ORCID (opcional)" style="flex: 1; padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px;">
                            ${authors.length > 1 ? `<button onclick="removeAuthor(${index})" class="btn-small">Remover</button>` : ''}
                        </div>
                    </div>
                `;
                container.appendChild(authorDiv);
            });
        }

        function addAuthor() {
            authors.push({ name: '', affiliation: '', orcid: '' });
            renderAuthors();
        }

        function updateAuthor(index, field, value) {
            authors[index][field] = value;
        }

        function removeAuthor(index) {
            if (authors.length > 1) {
                authors.splice(index, 1);
                renderAuthors();
            }
        }

        // Submit to Zenodo
        async function submitToZenodo() {
            const token = document.getElementById('zenodoToken').value;
            const useSandbox = document.getElementById('useSandbox').checked;
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const keywords = document.getElementById('keywords').value;

            if (!token) {
                showStatus('‚ùå Por favor, configure o token da API primeiro.', 'error');
                return;
            }

            if (!selectedFile) {
                showStatus('‚ùå Por favor, selecione um arquivo PDF.', 'error');
                return;
            }

            if (!title || !description) {
                showStatus('‚ùå Por favor, preencha o t√≠tulo e a descri√ß√£o.', 'error');
                return;
            }

            const submitBtn = document.getElementById('submitBtn');
            const submitBtnText = document.getElementById('submitBtnText');
            submitBtn.disabled = true;
            submitBtnText.innerHTML = '<div class="spinner"></div> Processando...';

            const baseUrl = useSandbox ? 'https://sandbox.zenodo.org/api' : 'https://zenodo.org/api';

            try {
                showStatus('üìù Criando dep√≥sito no Zenodo...', 'info');
                const createResponse = await fetch(`${baseUrl}/deposit/depositions`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({})
                });

                if (!createResponse.ok) {
                    throw new Error(`Erro ao criar dep√≥sito (${createResponse.status})`);
                }

                const deposit = await createResponse.json();

                showStatus('üì§ Fazendo upload do arquivo PDF...', 'info');
                const formData = new FormData();
                formData.append('file', selectedFile);

                const uploadResponse = await fetch(`${baseUrl}/deposit/depositions/${deposit.id}/files`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    },
                    body: formData
                });

                if (!uploadResponse.ok) {
                    throw new Error(`Erro ao fazer upload (${uploadResponse.status})`);
                }

                showStatus('üìã Atualizando metadados...', 'info');
                const keywordsArray = keywords.split(',').map(k => k.trim()).filter(k => k.length > 0);
                
                const metadata = {
                    metadata: {
                        title: title,
                        upload_type: 'publication',
                        publication_type: 'article',
                        description: description,
                        creators: authors.filter(a => a.name.trim().length > 0),
                        keywords: keywordsArray.length > 0 ? keywordsArray : undefined
                    }
                };

                const metadataResponse = await fetch(`${baseUrl}/deposit/depositions/${deposit.id}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(metadata)
                });

                if (!metadataResponse.ok) {
                    throw new Error(`Erro ao atualizar metadados (${metadataResponse.status})`);
                }

                showStatus('üéØ Publicando artigo...', 'info');
                const publishResponse = await fetch(`${baseUrl}/deposit/depositions/${deposit.id}/actions/publish`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (!publishResponse.ok) {
                    throw new Error(`Erro ao publicar (${publishResponse.status})`);
                }

                const published = await publishResponse.json();
                const zenodoLink = useSandbox ? `https://sandbox.zenodo.org/records/${deposit.id}` : `https://zenodo.org/records/${deposit.id}`;

                let successMsg = `<div style="text-align: center;">`;
                successMsg += `<h3 style="color: #10b981; font-size: 2.5rem; margin-bottom: 1rem;">üéâ Parab√©ns!</h3>`;
                successMsg += `<p style="font-size: 1.3rem; margin-bottom: 2rem; font-weight: 600;">Seu artigo foi <span style="color: #10b981;">publicado com sucesso</span>!</p>`;
                successMsg += `</div>`;
                
                successMsg += `<div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); padding: 24px; border-radius: 16px; border: 3px solid #10b981; margin: 24px 0; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.2);">`;
                successMsg += `<div style="text-align: center; margin-bottom: 16px;">`;
                successMsg += `<p style="font-size: 1.2rem; color: #166534; font-weight: 700; margin-bottom: 16px;">üéØ SEU DOI</p>`;
                successMsg += `</div>`;
                successMsg += `<div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">`;
                successMsg += `<a href="https://doi.org/${published.doi}" target="_blank" style="color: #667eea; word-break: break-all; font-family: 'Courier New', monospace; font-size: 1.3rem; font-weight: bold; display: block; text-align: center;">${published.doi}</a>`;
                successMsg += `</div>`;
                successMsg += `<p style="margin-top: 16px; color: #166534; font-size: 1rem; text-align: center; font-weight: 600;">‚úÖ Use este DOI para citar seu trabalho!</p>`;
                successMsg += `</div>`;
                
                successMsg += `<div style="background: white; padding: 20px; border-radius: 12px; border: 2px solid #93c5fd; margin: 20px 0;">`;
                successMsg += `<p style="margin-bottom: 12px; font-weight: 600; color: #1e40af;"><i class="fas fa-link"></i> Link da Publica√ß√£o:</p>`;
                successMsg += `<a href="${zenodoLink}" target="_blank" style="color: #667eea; word-break: break-all; font-size: 1rem;">${zenodoLink}</a>`;
                successMsg += `<p style="margin-top: 12px; color: #4b5563; font-size: 0.9rem;">üìä Acesse para ver estat√≠sticas de visualiza√ß√µes e downloads</p>`;
                successMsg += `</div>`;
                
                if (useSandbox) {
                    successMsg += `<div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 20px; border-radius: 12px; border: 2px solid #f59e0b; margin-top: 24px; text-align: center;">`;
                    successMsg += `<p style="color: #92400e; font-weight: 700; font-size: 1.2rem; margin: 0;">‚ö†Ô∏è AMBIENTE DE TESTE</p>`;
                    successMsg += `<p style="color: #92400e; margin: 12px 0 0 0; font-size: 1rem;">Este DOI √© do sandbox e n√£o √© permanente. Use o ambiente de produ√ß√£o para DOIs oficiais.</p>`;
                    successMsg += `</div>`;
                } else {
                    successMsg += `<div style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); padding: 20px; border-radius: 12px; border: 2px solid #3b82f6; margin-top: 24px; text-align: center;">`;
                    successMsg += `<p style="color: #1e40af; font-weight: 700; font-size: 1.2rem; margin: 0;">‚ú® PUBLICA√á√ÉO OFICIAL</p>`;
                    successMsg += `<p style="color: #1e40af; margin: 12px 0 0 0; font-size: 1rem;">Seu artigo est√° permanentemente indexado no Zenodo</p>`;
                    successMsg += `</div>`;
                }
                
                showStatus(successMsg, 'success');
                submitBtnText.innerHTML = '<i class="fas fa-check-circle"></i> Publicado com Sucesso!';

            } catch (error) {
                console.error('Error:', error);
                showStatus(`‚ùå ${error.message}<br><br>Se o problema persistir, entre em contato com o suporte da RevistaZen.`, 'error');
                submitBtn.disabled = false;
                submitBtnText.textContent = 'üöÄ Submeter ao Zenodo';
            }
        }

        // Show status message
        function showStatus(message, type) {
            const statusArea = document.getElementById('statusArea');
            const classes = {
                success: 'status-success',
                error: 'status-error',
                warning: 'status-warning',
                info: 'status-info'
            };

            statusArea.innerHTML = `
                <div class="card status ${classes[type]}">
                    ${message}
                </div>
            `;
            
            statusArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Initialize
        renderAuthors();
    </script>
</body>
</html>
